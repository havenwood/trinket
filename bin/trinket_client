#!/usr/bin/env ruby

# frozen_string_literal: true

$LOAD_PATH.prepend File.expand_path '../lib', __dir__

require 'grpc'
require 'pry'
require 'singleton'
require 'trinket_services_pb'

class Trinket::Client
  include Singleton

  def initialize
    @channel = Trinket::Gem::Stub.new 'localhost:50051', :this_channel_is_insecure
  end

  def gem name:
    @channel.gem Trinket::Request.new name: name
  end
end

response = Trinket::Client.instance.gem name: ARGV.first.to_s
gems = response.gems

binding.pry
